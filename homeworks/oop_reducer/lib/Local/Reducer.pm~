package Local::Reducer;

use strict;
use warnings;

=encoding utf8

=head1 NAME

Local::Reducer - base abstract reducer

=head1 VERSION

Version 1.00

=cut

our $VERSION = '1.00';

=head1 SYNOPSIS

Каждый такой класс имеет префикс `Local::Reducer`. Отвечает за непосредственно схлопывания, но абстрагирован от способа получения и парсинга данных.

Параметры конструктора:
* `source` — объект, выдающий строки из лога (см. ниже);
* `row_class` — имя класса, с помощью которого создаются объекты из каждой строки логов (см. ниже);
* `initial_value` — инициализационое значение для операции схлопывания.

Методы:
* `reduce_n($n)` — схлопнуть очередные `$n` строк, вернуть промежуточный результат.
* `reduce_all()` — схлопнуть все оставшиеся строки, вернуть результат.
* `reduced` — промежуточный результат.

Минимум надо реализовать:
* `Local::Reducer` — базовый абстрактный класс.
* `Local::Reducer::Sum` — суммирует значение поля, указанного в параметре `field` конструктора, каждой строки лога. В случае, если соответствующее поле не содержит числовое значение, строка игнорируется.
* `Local::Reducer::MaxDiff` — выясняет максимальную разницу между полями, указанными в параметрах `top` и `bottom` конструктора, среди всех строк лога. В случае, если соответствующие поля не содержат числовые значения, строка игнорируется.
=cut

sub new { };
sub reduce_n($n) { };
sub reduce_all() { };
sub reduced;

1;
